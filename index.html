<!DOCTYPE html>
<html>
<head>
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        $(document).bind('pageinit', function () {
            var childrenObject = {
                        "children": [
                            {
                                "child": {
                                    "child_name": "Declan",
                                    "child_dob": "12/05/2006",
                                    "physician": "Dr Prina"
                                }
                            },
                            {
                                "child": {
                                    "child_name": "Marin",
                                    "child_dob": "12/05/2001",
                                    "physician": "Dr Dean"
                                }
                            }
                        ]
                    }
                    ;

            var output = "";
            output += '<ul data-role="listview" data-inset="true" data-split-icon="gear" data-split-theme="d">';
            for (var i= 0; i<childrenObject.children.length; i++) {
                output += "<li><a href='checkup_list.html?child=" + childrenObject.children[i].child.child_name + "'><img src='img/CheckUpTracker_32.png' />";
                output += "<h3>" + childrenObject.children[i].child.child_name + "</h3></a>";
                output += '<a href="#add_child?child="' + childrenObject.children[i].child.child_name + '" data-rel="dialog" data-transition="slideup">Edit Child Information</a></li>';
            }
            output += "</ul>";
            $("#children_here").html(output).trigger( "create" );
        });
    </script>
    <script type="text/javascript" >
        //save the child name to localstorage
        $('#add_child').live('pageinit', function(event) {
            $('#savebtn').bind('click', function(event,ui) {
                alert('in save method');
                window.localStorage.setItem('child_name', $('#child_name').val())
                window.localStorage.setItem('childObject', JSON.stringify(childObject));
                    })
        });

        //get the stored data on page load (for editing, have to pass in child identifier to
        //retrieve that child's data.
        $('#add_child').live('pageshow', function(event, data) {
            //var child_dataObj = window.localStorage.getItem('childObject');
            $('#child_name').val(window.localStorage.getItem('child_name'));
        });


    </script>
    <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
</head>
<body>



<div data-role="page" data-theme="b">

    <div data-role="header">
        <h1>CheckupTracker</h1>
    </div><!-- /header -->

    <div data-role="content">
        <h3>Like a GPS for Checkups</h3>
        <h4 style="color:#666">Use Checkup Tracker to manage your child's checkups from birth through teen-age years.</h4>
        <div id="children_here">Children Here</div>

        <div data-role="container">
            <a href="#add_child" data-role="button" data-icon="star" data-inline="true">Add Child</a>

        </div>


    </div><!-- /content -->

</div><!-- /page -->

<div data-role="page" data-theme="b" id="add_child" data-add-back-btn="true">
    <div data-role="header">
        <h1>Add a Child</h1>
    </div><!-- /header -->

    <div data-role="content">
        <div data-role="fieldcontain" class="ui-hide-label">
            <input type="text" name="child_name" placeholder="Child's Name" id="child_name" class="sessionstore">
        </div>

        <div data-role='fieldcontain'>
            <label for="child_dob">Birthday:</label>
            <input type="date" name="dob" id="child_dob" class="sessionstore">
        </div>

    <div data-role="fieldcontain">
        <label for="clinic_name" class="select">Physician:</label>
        <select name="clinic_name" id="clinic_name" data-mini="false" data-inline="true">
            <option value="none">-- None --</option>
            <option value="dr1">Partners in Pediatrics</option>
            <option value="dr2">Shoreline Pediatrics</option>
            <option value="dr3">UW Medicine</option>
        </select>
    <a href="#add_clinic" data-mini="true" data-inline="true" style="float:right;">New Clinic...</a><br clear="all"/>

    </div>

    <a id="savebtn" data-role="button" data-mini="false" data-inline="true">Save</a>



    </div><!-- /content -->


</div> <!-- /page -->

</body>
</html>